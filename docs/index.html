<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="The package is intended to provide a tidyverse-style grammar for preprocessing, debugging, filtering, accessing, downloading and analyzing election data and polls in Spain.">
<title>A grammar for the analysis of electoral and poll data ‚Ä¢ pollspain</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="A grammar for the analysis of electoral and poll data">
<meta property="og:description" content="The package is intended to provide a tidyverse-style grammar for preprocessing, debugging, filtering, accessing, downloading and analyzing election data and polls in Spain.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><link rel="manifest" href="site.webmanifest">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">pollspain</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.9</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/dadosdelaplace/pollspain/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="pollspain">pollspain<a class="anchor" aria-label="anchor" href="#pollspain"></a>
</h1></div>
<p>Under development. <strong>Authors</strong>: Javier √Ålvarez-Li√©bana, David Pereiro-Pol, Mafalda Gonz√°lez-Gonz√°lez, Irene Bosque-Gala y Mikaela De Smedt.</p>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>Pending to detail</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of R package <a href="https://github.com/dadosdelaplace/pollspain" class="external-link">pollspain</a> from <a href="https://github.com/" class="external-link">GitHub</a> through the following code:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span> <span class="co"># only if not already installed</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"dadosdelaplace/pollspain"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/dadosdelaplace/pollspain" class="external-link">pollspain</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<div class="section level3">
<h3 id="election-data-functions">election data functions<a class="anchor" aria-label="anchor" href="#election-data-functions"></a>
</h3>
<p>El c√≥digo de esta familia de funciones se puede encontrar en el script <code>get_elections_data.R</code>. La funci√≥n principal es <code><a href="reference/summary_election_data.html">summary_election_data()</a></code>: dado un vector de fechas electorales, un vector de tipos de elecciones y un nivel geogr√°fico (<code>"all"</code>, <code>"ccaa"</code>, <code>"prov"</code>, ‚Ä¶), la funci√≥n devuelve al usuario una tabla de resumen de los resultados electorales. Indicando <code>by_parties = TRUE</code> la funci√≥n devuelve los resultados para cada partido o candidatura electoral, al nivel de agregaci√≥n pedido.</p>
<p>Los niveles de agregaci√≥n (<code>level</code>) pueden ser: <code>"all"</code>, <code>"ccaa"</code>, <code>"prov"</code>, <code>"mun"</code>, <code>"mun_district"</code> (distrito electoral), <code>"sec"</code> (secci√≥n censal) y <code>"poll_station"</code> (mesa electoral).</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Summary election data at national level (general data without candidacies ballots)</span></span>
<span><span class="va">summary_data_all</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/summary_election_data.html">summary_election_data</a></span><span class="op">(</span><span class="st">"congress"</span>, <span class="fl">2019</span>, <span class="fl">4</span><span class="op">)</span></span>
<span><span class="co">#&gt; üîé Check if parameters are allowed...</span></span>
<span><span class="co">#&gt; üì¶ Import data at poll station level ...</span></span>
<span><span class="co">#&gt; ‚è≥ Please wait, the volume of data downloaded and the internet connection may take a few seconds</span></span>
<span><span class="co">#&gt;    üó∫ Aggregate data at national level ...</span></span>
<span><span class="co">#&gt; ‚úÖüñá Join information sources and last summaries ...</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">summary_data_all</span><span class="op">)</span></span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="11%">
<col width="11%">
<col width="11%">
<col width="11%">
<col width="11%">
<col width="11%">
<col width="11%">
<col width="11%">
<col width="11%">
</colgroup>
<thead><tr>
<th align="left">id_elec</th>
<th align="right">blank_ballots</th>
<th align="right">invalid_ballots</th>
<th align="right">party_ballots</th>
<th align="right">valid_ballots</th>
<th align="right">total_ballots</th>
<th align="right">n_poll_stations</th>
<th align="right">pop_res_all</th>
<th align="right">census_counting_all</th>
</tr></thead>
<tbody><tr>
<td align="left">02-2019-04-28</td>
<td align="right">199836</td>
<td align="right">276769</td>
<td align="right">26001535</td>
<td align="right">26084449</td>
<td align="right">26359783</td>
<td align="right">60090</td>
<td align="right">46722980</td>
<td align="right">34799420</td>
</tr></tbody>
</table>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Summary election data at ccaa level, aggregating the candidacies ballots</span></span>
<span><span class="va">summary_data_ccaa_parties</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="reference/summary_election_data.html">summary_election_data</a></span><span class="op">(</span><span class="st">"congress"</span>, <span class="fl">2019</span>, <span class="fl">4</span>, level <span class="op">=</span> <span class="st">"ccaa"</span>,</span>
<span>                        by_parties <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; üîé Check if parameters are allowed...</span></span>
<span><span class="co">#&gt; üì¶ Import data at poll station level ...</span></span>
<span><span class="co">#&gt; ‚è≥ Please wait, the volume of data downloaded and the internet connection may take a few seconds</span></span>
<span><span class="co">#&gt;    üó∫ Aggregate data at ccaa level ...</span></span>
<span><span class="co">#&gt; ‚úÖüñá Join information sources and last summaries ...</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">summary_data_ccaa_parties</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="5%">
<col width="5%">
<col width="5%">
<col width="5%">
<col width="5%">
<col width="5%">
<col width="5%">
<col width="5%">
<col width="5%">
<col width="5%">
<col width="5%">
<col width="5%">
<col width="5%">
<col width="5%">
<col width="5%">
<col width="5%">
<col width="5%">
</colgroup>
<thead><tr>
<th align="left">id_elec</th>
<th align="left">cod_INE_ccaa</th>
<th align="right">blank_ballots</th>
<th align="right">invalid_ballots</th>
<th align="right">party_ballots</th>
<th align="right">valid_ballots</th>
<th align="right">total_ballots</th>
<th align="right">n_poll_stations</th>
<th align="left">id_candidacies</th>
<th align="left">abbrev_candidacies</th>
<th align="left">name_candidacies</th>
<th align="right">ballots</th>
<th align="right">pop_res_ccaa</th>
<th align="right">census_counting_ccaa</th>
<th align="right">porc_candidacies_parties</th>
<th align="right">porc_candidacies_valid</th>
<th align="right">porc_candidacies_census</th>
</tr></thead>
<tbody>
<tr>
<td align="left">02-2019-04-28</td>
<td align="left">01</td>
<td align="right">43084</td>
<td align="right">61295</td>
<td align="right">4540994</td>
<td align="right">4569140</td>
<td align="right">4630265</td>
<td align="right">10134</td>
<td align="left">000117</td>
<td align="left">VOX</td>
<td align="left">VOX</td>
<td align="right">612921</td>
<td align="right">8384408</td>
<td align="right">6316975</td>
<td align="right">13.498</td>
<td align="right">13.414</td>
<td align="right">9.703</td>
</tr>
<tr>
<td align="left">02-2019-04-28</td>
<td align="left">01</td>
<td align="right">43084</td>
<td align="right">61295</td>
<td align="right">4540994</td>
<td align="right">4569140</td>
<td align="right">4630265</td>
<td align="right">10134</td>
<td align="left">000028</td>
<td align="left">EB</td>
<td align="left">ESCA√ëOS EN BLANCO</td>
<td align="right">1324</td>
<td align="right">8384408</td>
<td align="right">6316975</td>
<td align="right">0.029</td>
<td align="right">0.029</td>
<td align="right">0.021</td>
</tr>
<tr>
<td align="left">02-2019-04-28</td>
<td align="left">01</td>
<td align="right">43084</td>
<td align="right">61295</td>
<td align="right">4540994</td>
<td align="right">4569140</td>
<td align="right">4630265</td>
<td align="right">10134</td>
<td align="left">000104</td>
<td align="left">RECORTES CE</td>
<td align="left">RECORTES CERO-GRUPO VERDE</td>
<td align="right">7826</td>
<td align="right">8384408</td>
<td align="right">6316975</td>
<td align="right">0.172</td>
<td align="right">0.171</td>
<td align="right">0.124</td>
</tr>
<tr>
<td align="left">02-2019-04-28</td>
<td align="left">01</td>
<td align="right">43084</td>
<td align="right">61295</td>
<td align="right">4540994</td>
<td align="right">4569140</td>
<td align="right">4630265</td>
<td align="right">10134</td>
<td align="left">000083</td>
<td align="left">PP</td>
<td align="left">PARTIDO POPULAR</td>
<td align="right">787384</td>
<td align="right">8384408</td>
<td align="right">6316975</td>
<td align="right">17.339</td>
<td align="right">17.233</td>
<td align="right">12.465</td>
</tr>
<tr>
<td align="left">02-2019-04-28</td>
<td align="left">01</td>
<td align="right">43084</td>
<td align="right">61295</td>
<td align="right">4540994</td>
<td align="right">4569140</td>
<td align="right">4630265</td>
<td align="right">10134</td>
<td align="left">000096</td>
<td align="left">PSOE</td>
<td align="left">PARTIDO SOCIALISTA OBRERO ESPA√ëOL</td>
<td align="right">1568682</td>
<td align="right">8384408</td>
<td align="right">6316975</td>
<td align="right">34.545</td>
<td align="right">34.332</td>
<td align="right">24.833</td>
</tr>
<tr>
<td align="left">02-2019-04-28</td>
<td align="left">01</td>
<td align="right">43084</td>
<td align="right">61295</td>
<td align="right">4540994</td>
<td align="right">4569140</td>
<td align="right">4630265</td>
<td align="right">10134</td>
<td align="left">000081</td>
<td align="left">PODEMOS-IU</td>
<td align="left">UNIDAS PODEMOS</td>
<td align="right">654944</td>
<td align="right">8384408</td>
<td align="right">6316975</td>
<td align="right">14.423</td>
<td align="right">14.334</td>
<td align="right">10.368</td>
</tr>
<tr>
<td align="left">02-2019-04-28</td>
<td align="left">01</td>
<td align="right">43084</td>
<td align="right">61295</td>
<td align="right">4540994</td>
<td align="right">4569140</td>
<td align="right">4630265</td>
<td align="right">10134</td>
<td align="left">000022</td>
<td align="left">CS</td>
<td align="left">CIUDADANOS-PARTIDO DE LA CIUDADAN√çA</td>
<td align="right">811562</td>
<td align="right">8384408</td>
<td align="right">6316975</td>
<td align="right">17.872</td>
<td align="right">17.762</td>
<td align="right">12.847</td>
</tr>
<tr>
<td align="left">02-2019-04-28</td>
<td align="left">01</td>
<td align="right">43084</td>
<td align="right">61295</td>
<td align="right">4540994</td>
<td align="right">4569140</td>
<td align="right">4630265</td>
<td align="right">10134</td>
<td align="left">000054</td>
<td align="left">PACMA</td>
<td align="left">PARTIDO ANIMALISTA CONTRA EL MALTRATO ANIMAL</td>
<td align="right">62027</td>
<td align="right">8384408</td>
<td align="right">6316975</td>
<td align="right">1.366</td>
<td align="right">1.358</td>
<td align="right">0.982</td>
</tr>
<tr>
<td align="left">02-2019-04-28</td>
<td align="left">01</td>
<td align="right">43084</td>
<td align="right">61295</td>
<td align="right">4540994</td>
<td align="right">4569140</td>
<td align="right">4630265</td>
<td align="right">10134</td>
<td align="left">000058</td>
<td align="left">PCPA</td>
<td align="left">PARTIDO COMUNISTA DEL PUEBLO ANDALUZ</td>
<td align="right">4697</td>
<td align="right">8384408</td>
<td align="right">6316975</td>
<td align="right">0.103</td>
<td align="right">0.103</td>
<td align="right">0.074</td>
</tr>
<tr>
<td align="left">02-2019-04-28</td>
<td align="left">01</td>
<td align="right">43084</td>
<td align="right">61295</td>
<td align="right">4540994</td>
<td align="right">4569140</td>
<td align="right">4630265</td>
<td align="right">10134</td>
<td align="left">000100</td>
<td align="left">PUM+J</td>
<td align="left">POR UN MUNDO M√ÅS JUSTO</td>
<td align="right">4326</td>
<td align="right">8384408</td>
<td align="right">6316975</td>
<td align="right">0.095</td>
<td align="right">0.095</td>
<td align="right">0.068</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Summary election data at prov level, aggregating the candidacies ballots</span></span>
<span><span class="va">summary_data_prov_parties</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="reference/summary_election_data.html">summary_election_data</a></span><span class="op">(</span><span class="st">"congress"</span>, <span class="fl">2019</span>, <span class="fl">4</span>, level <span class="op">=</span> <span class="st">"prov"</span>,</span>
<span>                        by_parties <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; üîé Check if parameters are allowed...</span></span>
<span><span class="co">#&gt; üì¶ Import data at poll station level ...</span></span>
<span><span class="co">#&gt; ‚è≥ Please wait, the volume of data downloaded and the internet connection may take a few seconds</span></span>
<span><span class="co">#&gt;    üó∫ Aggregate data at prov level ...</span></span>
<span><span class="co">#&gt; ‚úÖüñá Join information sources and last summaries ...</span></span></code></pre></div>
<p>Dicha funci√≥n combina, de manera sencilla para el usuario, <code><a href="reference/get_election_data.html">get_election_data()</a></code> y <code><a href="reference/aggregate_election_data.html">aggregate_election_data()</a></code></p>
<div class="section level4">
<h4 id="get_election_data">get_election_data()<a class="anchor" aria-label="anchor" href="#get_election_data"></a>
</h4>
</div>
<div class="section level4">
<h4 id="aggregate_election_data">aggregate_election_data()<a class="anchor" aria-label="anchor" href="#aggregate_election_data"></a>
</h4>
<p>La funci√≤n <code><a href="reference/aggregate_election_data.html">aggregate_election_data()</a></code> est√° destinada a agregar al nivel geogr√°fico pedido la informaci√≥n electoral que ya se le proporcione.</p>
</div>
</div>
<div class="section level3">
<h3 id="import-functions">import functions<a class="anchor" aria-label="anchor" href="#import-functions"></a>
</h3>
<p>Functions starting with <code>import_..._data()</code> (whose code can be found in the <code>import_elections_data.R</code> file) aimed at importing and preprocessing as raw as possible the <code>.DAT</code> election files from the Spanish Ministry of Interior. All functions download the <code>.rda</code> files available in the Github repository (directly downloaded from MIR website).</p>
<div class="section level4">
<h4 id="census-data-level-mun">Census data (level: mun)<a class="anchor" aria-label="anchor" href="#census-data-level-mun"></a>
</h4>
<p><code><a href="reference/import_mun_census_data.html">import_mun_census_data()</a></code> import municipal census data for one or more elections at the municipal level. This function downloads and processes ¬´raw¬ª municipal data files for specified elections, providing variables related to population, census and administrative codes.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mun_census_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/import_mun_census_data.html">import_mun_census_data</a></span><span class="op">(</span><span class="st">"congress"</span>, <span class="fl">2019</span>, <span class="fl">4</span><span class="op">)</span></span>
<span><span class="co">#&gt; üîé Check if parameters are allowed...</span></span>
<span><span class="co">#&gt; üì¶ Import census mun data from ...</span></span>
<span><span class="co">#&gt; - https://github.com/dadosdelaplace/pollspain-data/blob/main/02-congress/02201904/raw_mun_data_congress_2019_04.rda?raw=true</span></span>
<span><span class="va">mun_census_data</span></span>
<span><span class="co">#&gt; # A tibble: 8,131 √ó 18</span></span>
<span><span class="co">#&gt;    id_elec       cod_elec type_elec date_elec  id_INE_mun cod_INE_ccaa ccaa     </span></span>
<span><span class="co">#&gt;    &lt;glue&gt;        &lt;chr&gt;    &lt;chr&gt;     &lt;date&gt;     &lt;glue&gt;     &lt;chr&gt;        &lt;chr&gt;    </span></span>
<span><span class="co">#&gt;  1 02-2019-04-28 02       congress  2019-04-28 01-04-001  01           Andaluc√≠a</span></span>
<span><span class="co">#&gt;  2 02-2019-04-28 02       congress  2019-04-28 01-04-002  01           Andaluc√≠a</span></span>
<span><span class="co">#&gt;  3 02-2019-04-28 02       congress  2019-04-28 01-04-003  01           Andaluc√≠a</span></span>
<span><span class="co">#&gt;  4 02-2019-04-28 02       congress  2019-04-28 01-04-004  01           Andaluc√≠a</span></span>
<span><span class="co">#&gt;  5 02-2019-04-28 02       congress  2019-04-28 01-04-005  01           Andaluc√≠a</span></span>
<span><span class="co">#&gt;  6 02-2019-04-28 02       congress  2019-04-28 01-04-006  01           Andaluc√≠a</span></span>
<span><span class="co">#&gt;  7 02-2019-04-28 02       congress  2019-04-28 01-04-007  01           Andaluc√≠a</span></span>
<span><span class="co">#&gt;  8 02-2019-04-28 02       congress  2019-04-28 01-04-008  01           Andaluc√≠a</span></span>
<span><span class="co">#&gt;  9 02-2019-04-28 02       congress  2019-04-28 01-04-009  01           Andaluc√≠a</span></span>
<span><span class="co">#&gt; 10 02-2019-04-28 02       congress  2019-04-28 01-04-010  01           Andaluc√≠a</span></span>
<span><span class="co">#&gt; # ‚Ñπ 8,121 more rows</span></span>
<span><span class="co">#&gt; # ‚Ñπ 11 more variables: cod_INE_prov &lt;chr&gt;, prov &lt;chr&gt;, cod_INE_mun &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   mun &lt;chr&gt;, cod_mun_jud_district &lt;chr&gt;, cod_mun_prov_council &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   n_poll_stations &lt;dbl&gt;, pop_res_mun &lt;dbl&gt;, census_INE_mun &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   census_counting_mun &lt;dbl&gt;, census_CERE_mun &lt;dbl&gt;</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="poll-station-data-level-poll-station">Poll station data (level: poll station)<a class="anchor" aria-label="anchor" href="#poll-station-data-level-poll-station"></a>
</h4>
<p><code><a href="reference/import_poll_station_data.html">import_poll_station_data()</a></code> import and preprocess elections data at poll stations level for given election types and dates, providing variables related to turnout, blank/valid votes, etc</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">poll_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/import_poll_station_data.html">import_poll_station_data</a></span><span class="op">(</span><span class="st">"congress"</span>, <span class="fl">2019</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">11</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; üîé Check if parameters are allowed...</span></span>
<span><span class="co">#&gt; üì¶ Import poll station data from ...</span></span>
<span><span class="co">#&gt; - https://github.com/dadosdelaplace/pollspain-data/blob/main/02-congress/02201904/raw_poll_stations_congress_2019_04.rda?raw=true</span></span>
<span><span class="co">#&gt; - https://github.com/dadosdelaplace/pollspain-data/blob/main/02-congress/02201911/raw_poll_stations_congress_2019_11.rda?raw=true</span></span>
<span><span class="co">#&gt; üîé Check if parameters are allowed...</span></span>
<span><span class="co">#&gt; üì¶ Import census mun data from ...</span></span>
<span><span class="co">#&gt; - https://github.com/dadosdelaplace/pollspain-data/blob/main/02-congress/02201904/raw_mun_data_congress_2019_04.rda?raw=true</span></span>
<span><span class="co">#&gt; - https://github.com/dadosdelaplace/pollspain-data/blob/main/02-congress/02201911/raw_mun_data_congress_2019_11.rda?raw=true</span></span>
<span><span class="co">#&gt; ‚ö†Ô∏è A short version was asked. If you require all variables, please run with `short_version = FALSE'</span></span>
<span><span class="va">poll_data</span></span>
<span><span class="co">#&gt; # A tibble: 119,697 √ó 20</span></span>
<span><span class="co">#&gt;    id_elec type_elec date_elec  id_INE_poll_station id_INE_mun ccaa  prov  mun  </span></span>
<span><span class="co">#&gt;    &lt;glue&gt;  &lt;chr&gt;     &lt;date&gt;     &lt;glue&gt;              &lt;glue&gt;     &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;</span></span>
<span><span class="co">#&gt;  1 02-201‚Ä¶ congress  2019-04-28 01-04-003-01-004-B  01-04-003  Anda‚Ä¶ Alme‚Ä¶ Adra </span></span>
<span><span class="co">#&gt;  2 02-201‚Ä¶ congress  2019-04-28 01-04-003-01-007-U  01-04-003  Anda‚Ä¶ Alme‚Ä¶ Adra </span></span>
<span><span class="co">#&gt;  3 02-201‚Ä¶ congress  2019-04-28 01-04-003-02-001-A  01-04-003  Anda‚Ä¶ Alme‚Ä¶ Adra </span></span>
<span><span class="co">#&gt;  4 02-201‚Ä¶ congress  2019-04-28 01-04-006-01-002-A  01-04-006  Anda‚Ä¶ Alme‚Ä¶ Albox</span></span>
<span><span class="co">#&gt;  5 02-201‚Ä¶ congress  2019-04-28 01-04-008-01-001-A  01-04-008  Anda‚Ä¶ Alme‚Ä¶ Alc√≥‚Ä¶</span></span>
<span><span class="co">#&gt;  6 02-201‚Ä¶ congress  2019-04-28 01-04-010-01-001-U  01-04-010  Anda‚Ä¶ Alme‚Ä¶ Alha‚Ä¶</span></span>
<span><span class="co">#&gt;  7 02-201‚Ä¶ congress  2019-04-28 01-04-013-02-005-A  01-04-013  Anda‚Ä¶ Alme‚Ä¶ Alme‚Ä¶</span></span>
<span><span class="co">#&gt;  8 02-201‚Ä¶ congress  2019-04-28 01-04-013-03-011-A  01-04-013  Anda‚Ä¶ Alme‚Ä¶ Alme‚Ä¶</span></span>
<span><span class="co">#&gt;  9 02-201‚Ä¶ congress  2019-04-28 01-04-013-06-013-A  01-04-013  Anda‚Ä¶ Alme‚Ä¶ Alme‚Ä¶</span></span>
<span><span class="co">#&gt; 10 02-201‚Ä¶ congress  2019-04-28 01-04-013-06-016-B  01-04-013  Anda‚Ä¶ Alme‚Ä¶ Alme‚Ä¶</span></span>
<span><span class="co">#&gt; # ‚Ñπ 119,687 more rows</span></span>
<span><span class="co">#&gt; # ‚Ñπ 12 more variables: blank_ballots &lt;dbl&gt;, invalid_ballots &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   party_ballots &lt;dbl&gt;, valid_ballots &lt;dbl&gt;, total_ballots &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   turnout &lt;dbl&gt;, porc_valid &lt;dbl&gt;, porc_invalid &lt;dbl&gt;, porc_parties &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   porc_blank &lt;dbl&gt;, pop_res_mun &lt;dbl&gt;, census_counting_mun &lt;dbl&gt;</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="candidacies-data-level-poll-station">Candidacies data (level: poll station)<a class="anchor" aria-label="anchor" href="#candidacies-data-level-poll-station"></a>
</h4>
<p><code><a href="reference/import_candidacies_data.html">import_candidacies_data()</a></code> import and preprocess candidacies data, providing variables related to id of candidacies, abbreviature and names of them and ballots obtained for each one at each poll station.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">candidacies_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/import_candidacies_data.html">import_candidacies_data</a></span><span class="op">(</span><span class="st">"congress"</span>, <span class="fl">2019</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">11</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; üîé Check if parameters are allowed...</span></span>
<span><span class="co">#&gt; üì¶ Import candidacies data at poll station level from ...</span></span>
<span><span class="co">#&gt; - https://github.com/dadosdelaplace/pollspain-data/blob/main/02-congress/02201904/raw_candidacies_poll_congress_2019_04.rda?raw=true</span></span>
<span><span class="co">#&gt; - https://github.com/dadosdelaplace/pollspain-data/blob/main/02-congress/02201911/raw_candidacies_poll_congress_2019_11.rda?raw=true</span></span>
<span><span class="co">#&gt; ‚è≥ Please wait, the volume of data downloaded and the internet connection may take a few seconds</span></span>
<span><span class="co">#&gt; ‚ö†Ô∏è A short version was asked. If you require all variables, please run with `short_version = FALSE'</span></span>
<span><span class="va">candidacies_data</span></span>
<span><span class="co">#&gt; # A tibble: 1,482,129 √ó 12</span></span>
<span><span class="co">#&gt;    id_elec type_elec date_elec  id_INE_poll_station id_INE_mun ccaa  prov  mun  </span></span>
<span><span class="co">#&gt;    &lt;glue&gt;  &lt;chr&gt;     &lt;date&gt;     &lt;glue&gt;              &lt;glue&gt;     &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;</span></span>
<span><span class="co">#&gt;  1 02-201‚Ä¶ congress  2019-04-28 01-04-001-01-001-B  01-04-001  Anda‚Ä¶ Alme‚Ä¶ Abla </span></span>
<span><span class="co">#&gt;  2 02-201‚Ä¶ congress  2019-04-28 01-04-001-01-001-B  01-04-001  Anda‚Ä¶ Alme‚Ä¶ Abla </span></span>
<span><span class="co">#&gt;  3 02-201‚Ä¶ congress  2019-04-28 01-04-002-01-001-A  01-04-002  Anda‚Ä¶ Alme‚Ä¶ Abru‚Ä¶</span></span>
<span><span class="co">#&gt;  4 02-201‚Ä¶ congress  2019-04-28 01-04-002-01-001-A  01-04-002  Anda‚Ä¶ Alme‚Ä¶ Abru‚Ä¶</span></span>
<span><span class="co">#&gt;  5 02-201‚Ä¶ congress  2019-04-28 01-04-003-01-003-A  01-04-003  Anda‚Ä¶ Alme‚Ä¶ Adra </span></span>
<span><span class="co">#&gt;  6 02-201‚Ä¶ congress  2019-04-28 01-04-003-01-003-B  01-04-003  Anda‚Ä¶ Alme‚Ä¶ Adra </span></span>
<span><span class="co">#&gt;  7 02-201‚Ä¶ congress  2019-04-28 01-04-003-01-003-B  01-04-003  Anda‚Ä¶ Alme‚Ä¶ Adra </span></span>
<span><span class="co">#&gt;  8 02-201‚Ä¶ congress  2019-04-28 01-04-003-01-006-A  01-04-003  Anda‚Ä¶ Alme‚Ä¶ Adra </span></span>
<span><span class="co">#&gt;  9 02-201‚Ä¶ congress  2019-04-28 01-04-003-01-007-U  01-04-003  Anda‚Ä¶ Alme‚Ä¶ Adra </span></span>
<span><span class="co">#&gt; 10 02-201‚Ä¶ congress  2019-04-28 01-04-003-02-002-A  01-04-003  Anda‚Ä¶ Alme‚Ä¶ Adra </span></span>
<span><span class="co">#&gt; # ‚Ñπ 1,482,119 more rows</span></span>
<span><span class="co">#&gt; # ‚Ñπ 4 more variables: id_candidacies &lt;chr&gt;, abbrev_candidacies &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   name_candidacies &lt;chr&gt;, ballots &lt;dbl&gt;</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="datos-del-cera-pending">Datos del CERA (pending)<a class="anchor" aria-label="anchor" href="#datos-del-cera-pending"></a>
</h4>
<p>According to the National Statistics Institute (INE):</p>
<p>¬´The electoral roll contains the registration of those who meet the requirements to be voters and are not definitively or temporarily deprived of the right to vote. The electoral roll is composed of:</p>
<ul>
<li><p>The electoral roll of Spanish citizens residing in Spain (CER).</p></li>
<li><p>The electoral roll of Spanish citizens residing abroad (CERA).</p></li>
</ul>
<p>The electoral roll of residents in Spain who are nationals of countries with Agreements for municipal elections (CERE Agreements), and the electoral roll of citizens of the European Union residing in Spain for municipal and European Parliament elections (CERE EU).¬ª</p>
<p>The <code>get_CERA_data()</code> function returns the data related to the CERA.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ccaa_CERA_data</span> <span class="op">&lt;-</span> <span class="fu">get_CERA_data</span><span class="op">(</span><span class="va">election_data</span>, level <span class="op">=</span> <span class="st">"ccaa"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="util-functions">util functions<a class="anchor" aria-label="anchor" href="#util-functions"></a>
</h3>
<p>The functions contained in the <code>utils.R</code> script are intended to serve as helper functions for data preprocessing.</p>
<ul>
<li>
<code><a href="reference/type_to_code_election.html">type_to_code_election()</a></code>: converts from election type (referendum, congress, senate, etc.) to the official ministry code.</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/type_to_code_election.html">type_to_code_election</a></span><span class="op">(</span>type_elec <span class="op">=</span> <span class="st">"congress"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "02"</span></span></code></pre></div>
<ul>
<li>
<code><a href="reference/extract_code.html">extract_code()</a></code>: given a polling station code, it returns the code corresponding to the requested level of disaggregation.</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/extract_code.html">extract_code</a></span><span class="op">(</span><span class="st">"01-04-003-01-004-B"</span>, level <span class="op">=</span> <span class="st">"mun"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "003"</span></span>
<span><span class="fu"><a href="reference/extract_code.html">extract_code</a></span><span class="op">(</span><span class="st">"01-04-003-01-004-B"</span>, level <span class="op">=</span> <span class="st">"mun"</span>, full_cod <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "01-04-003"</span></span></code></pre></div>
<ul>
<li>
<code><a href="reference/recod_parties.html">recod_parties()</a></code>: recodes party names and their acronyms (pending)</li>
</ul>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/dadosdelaplace/pollspain/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/dadosdelaplace/pollspain/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing pollspain</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Javier √Ålvarez-Li√©bana <br><small class="roles"> Author, maintainer, copyright holder </small> <a href="https://orcid.org/0000-0003-0671-3856" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>David Pereiro-Pol <br><small class="roles"> Author </small>  </li>
<li>Mafalda Gonz√°lez-Gonz√°lez <br><small class="roles"> Author </small>  </li>
<li>Irene Bosque-Gala <br><small class="roles"> Author </small>  </li>
<li>Mikaela De Smedt <br><small class="roles"> Author </small>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Javier √Ålvarez-Li√©bana, David Pereiro-Pol, Mafalda Gonz√°lez-Gonz√°lez, Irene Bosque-Gala, Mikaela De Smedt.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
